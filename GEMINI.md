برومبت مشروع نظام إدارة جوازات السفر (المرحلة الأولى)

الهدف من البرومبت: تطوير هيكل أساسي (MVP) لنظام إدارة جوازات السفر عبر سطر الأوامر (CLI) باستخدام لغة Python.

المتطلبات الأساسية:

    اللغة: Python 3.7+

    التخزين: استخدام قاعدة بيانات SQLite للمرحلة الأولى.

    الواجهة: واجهة سطر أوامر تفاعلية (CLI).

    الهيكل: يجب أن يكون الكود مُعدًا بطريقة تسمح بالتوسع المستقبلي (Modular).

تعليمات مفصلة للمساعد (Gemini CLI):

1. تحليل المتطلبات وتهيئة المشروع:

    قم بتحليل المتطلبات التالية وإنشاء هيكل مجلدات أولي للمشروع. يجب أن يشمل:

        main.py: (نقطة الدخول الرئيسية للتطبيق).

        database/: مجلد لملفات إدارة قاعدة البيانات.

            __init__.py

            models.py: (يحتوي على تعريفات الجداول).

            database_manager.py: (يحتوي على دوال الاتصال والتهيئة).

        services/: مجلد للخدمات والمنطق.

            __init__.py

            passport_service.py: (يحتوي على جميع العمليات المتعلقة بالجوازات).

        utils/: مجلد للأدوات المساعدة.

            __init__.py

            validators.py: (يحتوي على دوال التحقق من صحة البيانات مثل الرقم الوطني، تاريخ الانتهاء، إلخ).

2. تصميم قاعدة البيانات (في ملف database/models.py):

    أنشئ جدولاً واحداً باسم passports يحتوي على الأعمدة التالية:

        id (Integer, Primary Key, Auto-increment)

        national_id (Text, Unique, Not Null) - الرقم الوطني لمالك الجواز.

        passport_number (Text, Unique, Not Null) - رقم الجواز.

        full_name (Text, Not Null) - الاسم الكامل.

        date_of_birth (Text, Not Null) - تاريخ الميلاد (يمكن استخدام نص في هذه المرحلة للتسهيل).

        nationality (Text, Not Null) - الجنسية.

        issue_date (Text, Not Null) - تاريخ الإصدار.

        expiry_date (Text, Not Null) - تاريخ الانتهاء.

        authority (Text, Not Null) - الجهة المصدرة.

        created_at (Text, Default: current timestamp) - وقت إدخال السجل.

    تأكد من كتابة كود لإنشاء الجدول تلقائيًا عند التشغيل الأول.

3. تطوير خدمة إدارة الجوازات (في ملف services/passport_service.py):

    اكتب دوال (Functions) للتعامل مع الجوازات، تشمل الوظائف التالية:

        add_passport(national_id, passport_number, full_name, date_of_birth, nationality, issue_date, expiry_date, authority): لإضافة جواز جديد مع التحقق من عدم تكرار national_id أو passport_number.

        view_all_passports(): لاسترجاع وعرض جميع الجوازات.

        search_passport(search_term): للبحث عن جواز باستخدام national_id أو passport_number أو full_name.

        update_passport(passport_number, **kwargs): لتحديث بيانات جواز موجود (يجب أن يكون passport_number هو المفتاح).

        delete_passport(passport_number): لحذف جواز بناءً على رقمه.

    يجب أن تتضمن هذه الدوال معالجة للأخطاء (Exception Handling) مثل محاولة إضافة رقم مكرر، أو عدم العثور على جواز.

4. تطوير أدوات التحقق (في ملف utils/validators.py):

    اكتب دوال مساعدة للتحقق من:

        is_valid_date(date_string): للتحقق من صحة تنسيق التاريخ (YYYY-MM-DD).

        is_future_date(date_string): للتحقق من أن التاريخ (مثل تاريخ الانتهاء) في المستقبل.

        is_valid_national_id(national_id): للتحقق من أن الرقم الوطني يتكون من أرقام فقط وطوله معقول (يمكن تحديد 10 أرقام مثالياً).

5. تطوير واجهة سطر الأوامر الرئيسية (في ملف main.py):

    أنشئ حلقة (Loop) رئيسية تعرض قائمة (Menu) للمستخدم مع الخيارات التالية:
    text

=== نظام إدارة جوازات السفر ===
1. إضافة جواز جديد
2. عرض جميع الجوازات
3. البحث عن جواز
4. تحديث بيانات جواز
5. حذف جواز
6. الخروج

    استخدم مكتبة argparse أو input() بسيط لالتقاط اختيار المستخدم.

    بناءً على الاختيار، استدعِ الدالة المناسبة من passport_service.py.

    اعرض النتائج للمستخدم بشكل منظم (مثل استخدام tabulate لعرض البيانات في جدول إذا كانت المكتبة متوفرة، أو طباعة بشكل بسيط).

    يجب أن تكون الواجهة سهلة الاستخدام وتتعامل مع المدخلات الخاطئة من المستخدم بلطف (User-Friendly).

6. التوثيق والتعليمات:

    اكتب تعليقات (Comments) واضحة داخل الكود خاصة للأجزاء المعقدة.

    في نهاية الرد، قدم لي تعليمات واضحة ومختصرة حول كيفية تشغيل هذا المشروع من الصفر، بما في ذلك أي مكتبات خارجية يجب تثبيتها (مثل tabulate لتحسين عرض الجداول، إن أمكن).

النتيجة المتوقعة من المساعد (Gemini CLI):

يجب أن يقوم المساعد بإنشاء جميع الملفات المذكورة أعلاه (main.py, database/models.py, إلخ...) وملئها بالكود المناسب لكل قسم، مع شرح كيفية تجميع هذه الملفات وتشغيل النظام.

ابدأ الآن في توليد الكود والهيكل بناءً على هذه المتطلبات.
